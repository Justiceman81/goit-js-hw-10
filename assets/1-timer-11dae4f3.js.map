{"version":3,"file":"1-timer-11dae4f3.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport imageUrl from '../img/alert-icon.svg';\n\nconst refs = {\n  dateTime: document.querySelector('#datetime-picker'),\n  button: document.querySelector('[data-start]'),\n  timer: {\n    dataDays: document.querySelector('[data-days]'),\n    dataHours: document.querySelector('[data-hours]'),\n    dataMinutes: document.querySelector('[data-minutes]'),\n    dataSeconds: document.querySelector('[data-seconds]'),\n  },\n};\n\nlet userSelectedDate;\nlet initTimeId;\nrefs.button.disabled = true;\nrefs.button.classList.add('disabled');\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < Date.now()) {\n      iziToast.show({\n        title: 'ERROR',\n        message: 'Please choose a date in the future',\n        backgroundColor: '#ef4040',\n        titleColor: '#fff',\n        titleSize: '16px',\n        messageColor: '#fff',\n        messageSize: '16px',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n        iconUrl: imageUrl,\n        iconColor: '#FAFAFB',\n        imageWidth: 302,\n        theme: 'dark',\n      });\n    } else {\n      userSelectedDate = selectedDates[0];\n      refs.button.disabled = false;\n      refs.button.classList.remove('disabled');\n      refs.button.classList.add('enabled');\n    }\n  },\n});\n\nrefs.button.addEventListener('click', () => {\n  refs.button.disabled = true;\n  refs.button.classList.remove('enabled');\n  refs.button.classList.add('disabled');\n  refs.dateTime.disabled = true;\n\n  initTimeId = setInterval(() => {\n    const currentTime = Date.now();\n    const diff = userSelectedDate - currentTime;\n\n    if (diff <= 0) {\n      clearInterval(initTimeId);\n      iziToast.show({\n        title: 'Time Up!',\n        message: 'The countdown has finished.',\n        backgroundColor: '#4CAF50',\n        titleColor: '#fff',\n        titleSize: '16px',\n        messageColor: '#fff',\n        messageSize: '16px',\n        progressBarColor: '#1B5E20',\n        position: 'topRight',\n        iconUrl: imageUrl,\n        iconColor: '#FAFAFB',\n        imageWidth: 302,\n        theme: 'dark',\n      });\n      return;\n    }\n\n    const time = convertMs(diff);\n    updateTimer(time);\n  }, 1000);\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  refs.timer.dataDays.textContent = days.toString().padStart(2, '0');\n  refs.timer.dataHours.textContent = hours.toString().padStart(2, '0');\n  refs.timer.dataMinutes.textContent = minutes.toString().padStart(2, '0');\n  refs.timer.dataSeconds.textContent = seconds.toString().padStart(2, '0');\n}\n"],"names":["refs","userSelectedDate","initTimeId","flatpickr","selectedDates","iziToast","imageUrl","currentTime","diff","time","convertMs","updateTimer","ms","days","hours","minutes","seconds"],"mappings":"mFAOA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,kBAAkB,EACnD,OAAQ,SAAS,cAAc,cAAc,EAC7C,MAAO,CACL,SAAU,SAAS,cAAc,aAAa,EAC9C,UAAW,SAAS,cAAc,cAAc,EAChD,YAAa,SAAS,cAAc,gBAAgB,EACpD,YAAa,SAAS,cAAc,gBAAgB,CACrD,CACH,EAEA,IAAIC,EACAC,EACJF,EAAK,OAAO,SAAW,GACvBA,EAAK,OAAO,UAAU,IAAI,UAAU,EAEpCG,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAI,KAAK,IAAG,EAC7BC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,gBAAiB,UACjB,WAAY,OACZ,UAAW,OACX,aAAc,OACd,YAAa,OACb,iBAAkB,UAClB,SAAU,WACV,QAASC,EACT,UAAW,UACX,WAAY,IACZ,MAAO,MACf,CAAO,GAEDL,EAAmBG,EAAc,CAAC,EAClCJ,EAAK,OAAO,SAAW,GACvBA,EAAK,OAAO,UAAU,OAAO,UAAU,EACvCA,EAAK,OAAO,UAAU,IAAI,SAAS,EAEtC,CACH,CAAC,EAEDA,EAAK,OAAO,iBAAiB,QAAS,IAAM,CAC1CA,EAAK,OAAO,SAAW,GACvBA,EAAK,OAAO,UAAU,OAAO,SAAS,EACtCA,EAAK,OAAO,UAAU,IAAI,UAAU,EACpCA,EAAK,SAAS,SAAW,GAEzBE,EAAa,YAAY,IAAM,CAC7B,MAAMK,EAAc,KAAK,MACnBC,EAAOP,EAAmBM,EAEhC,GAAIC,GAAQ,EAAG,CACb,cAAcN,CAAU,EACxBG,EAAS,KAAK,CACZ,MAAO,WACP,QAAS,8BACT,gBAAiB,UACjB,WAAY,OACZ,UAAW,OACX,aAAc,OACd,YAAa,OACb,iBAAkB,UAClB,SAAU,WACV,QAASC,EACT,UAAW,UACX,WAAY,IACZ,MAAO,MACf,CAAO,EACD,MACD,CAED,MAAMG,EAAOC,EAAUF,CAAI,EAC3BG,EAAYF,CAAI,CACjB,EAAE,GAAI,CACT,CAAC,EAED,SAASC,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAY,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDhB,EAAK,MAAM,SAAS,YAAca,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACjEb,EAAK,MAAM,UAAU,YAAcc,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACnEd,EAAK,MAAM,YAAY,YAAce,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACvEf,EAAK,MAAM,YAAY,YAAcgB,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,CACzE"}